{"version":3,"sources":["webpack:///webpack/bootstrap eaf9fd5c03ed2c12452c","webpack:///./src/main.js","webpack:///./src/game.js","webpack:///./src/food.js","webpack:///./src/view.js","webpack:///./src/snake.js"],"names":["snake","size","view","gameCtrl","init","start","DEF_SPEED","KEY_LEFT","KEY_UP","KEY_RIGHT","KEY_DOWN","_gameLoop","_moving","_score","options","speed","food","listenKeyDown","keyCode","handleKeyDown","Math","floor","width","height","makeFood","stop","setInterval","run","clearInterval","move","collisionCheck","canEat","grow","render","head","getHead","x","y","i","len","getLength","node","nodeAt","dir","moveTo","goTo","snakeX","snakeY","nextStep","FOOD_COLOR","color","random","_canPutFoodAt","DEF_WIDTH","DEF_HEIGHT","DEF_BORDER_COLOR","DEF_BG_COLOR","borderColor","borderCOlor","bgColor","initCanvas","canvas","document","getElementById","ctx","getContext","callback","addEventListener","evt","window","event","score","clearRect","drawBackground","drawSnake","drawFood","rect","fillStyle","fill","strokeStyle","lineWidth","stroke","fillRect","DEF_SIZE","BODY_COLOR","HEAD_COLOR","_makeBodyNode","nodeX","nodeY","bodyColor","headColor","body","count","addNode","nextNode","currNode","Error","unshift","newHead","push","index","length"],"mappings":"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","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap eaf9fd5c03ed2c12452c","import GameController from './game.js';\r\nimport GameView from './view.js';\r\nimport Snake from './snake.js';\r\n\r\nlet snake = new Snake({\r\n    size: 10\r\n});\r\n\r\nlet view = new GameView();\r\n\r\nlet gameCtrl = new GameController({\r\n    snake: snake,\r\n    view: view\r\n});\r\n\r\ngameCtrl.init();\r\ngameCtrl.start();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Food from './food.js';\r\n\r\nconst DEF_SPEED = 200;   // snake speed(redrawing interval), units in ms\r\n\r\nconst KEY_LEFT = 37;\r\nconst KEY_UP = 38;\r\nconst KEY_RIGHT = 39;\r\nconst KEY_DOWN = 40;\r\n\r\nlet _gameLoop = null;\r\nlet _moving = false;\r\nlet _score = 0;\r\n\r\nexport default class {\r\n    constructor(options) {\r\n        this.snake = options.snake;\r\n        this.view = options.view;\r\n        this.speed = options.speed || DEF_SPEED;\r\n        this.food = new Food(this.snake.size);\r\n    }\r\n\r\n    init() {\r\n        this.view.listenKeyDown((keyCode) => {\r\n            this.handleKeyDown(keyCode);\r\n        });\r\n        // Give snake an initial position\r\n        this.snake.init(Math.floor(this.view.width / 2), Math.floor(this.view.height / 2));\r\n        this.food.makeFood(this.snake, this.view.width, this.view.height);\r\n    }\r\n\r\n    start() {\r\n        this.stop();\r\n        _score = 0;\r\n        _gameLoop = setInterval(() => {\r\n            this.run();\r\n        }, this.speed);\r\n    }\r\n\r\n    stop() {\r\n        clearInterval(_gameLoop);\r\n        _gameLoop = null;\r\n    }\r\n\r\n    run() {\r\n        this.snake.move();\r\n        if (this.collisionCheck()) {\r\n            this.stop();\r\n            return;\r\n        }\r\n\r\n        if (this.canEat()) {\r\n            this.snake.grow();\r\n            _score++;\r\n            this.food.makeFood(this.snake, this.view.width, this.view.height);\r\n        }\r\n        this.view.render(this.snake, this.food, _score);\r\n        _moving = false;\r\n    }\r\n\r\n    // Return true if snake head's position is the same as the food's position\r\n    canEat() {\r\n        let head = this.snake.getHead();\r\n        if (head.x === this.food.x && head.y === this.food.y) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // check collision\r\n    collisionCheck() {\r\n        let head = this.snake.getHead();\r\n        for (let i = 0, len = this.snake.getLength() - 1; i < len; i++) {\r\n            let node = this.snake.nodeAt(i);\r\n            if (node.x === head.x && node.y === head.y) {\r\n                return true;\r\n            }\r\n        }\r\n        return head.x < 0 || head.x >= this.view.width || head.y < 0 || head.y >= this.view.height;\r\n    }\r\n\r\n    // Handle keydow action, pressing arrow keys to move snake\r\n    handleKeyDown(keyCode) {\r\n        if (_gameLoop === null) return;\r\n        let dir = 0;\r\n        if (keyCode === KEY_UP) {\r\n            dir = 1;\r\n        } else if (keyCode === KEY_RIGHT) {\r\n            dir = 2;\r\n        } else if (keyCode === KEY_DOWN) {\r\n            dir = 3;\r\n        }\r\n        if (!_moving) this.moveTo(dir);\r\n    }\r\n\r\n    // 0: left, 1: up, 2: right, 3: down\r\n    moveTo(dir) {\r\n        let goTo = {\r\n            x: this.snake.snakeX,\r\n            y: this.snake.snakeY\r\n        };\r\n\r\n        if (!!goTo.x) {\r\n            if (dir === 1 || dir === 3) {\r\n                goTo.x = 0;\r\n                goTo.y = dir - 2;\r\n            }\r\n        } else if (!!goTo.y) {\r\n            if (dir === 0 || dir === 2) {\r\n                goTo.x = dir - 1;\r\n                goTo.y = 0;\r\n            }\r\n        }\r\n\r\n        this.snake.nextStep(goTo);\r\n        _moving = true;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game.js","const FOOD_COLOR = '#C46243';\r\n\r\nexport default class {\r\n    constructor(size) {\r\n        this.size = size || 10;\r\n        this.color = FOOD_COLOR;\r\n    }\r\n\r\n    makeFood(snake, width, height) {\r\n        while(true) {\r\n            this.x = Math.floor(Math.random() * width / this.size) * this.size;\r\n            this.y = Math.floor(Math.random() * height / this.size) * this.size;\r\n            if (_canPutFoodAt(snake, this.x, this.y)) return;\r\n        }\r\n    }\r\n}\r\n\r\nfunction _canPutFoodAt(snake, x, y) {\r\n    for (let i = 0, len = snake.getLength(); i < len; i++) {\r\n        let node = snake.nodeAt(i);\r\n        if (node.x === x && node.y === y) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/food.js","const DEF_WIDTH = 640;   // default canvas dimension, unit in px\r\nconst DEF_HEIGHT = 480;\r\nconst DEF_BORDER_COLOR = '#333';\r\nconst DEF_BG_COLOR = '#eee';\r\n\r\nexport default class {\r\n    constructor(options) {\r\n        options = options || {};\r\n        this.width = options.width || DEF_WIDTH;\r\n        this.height = options.height || DEF_HEIGHT;\r\n        this.borderColor = options.borderCOlor || DEF_BORDER_COLOR;\r\n        this.bgColor = options.bgColor || DEF_BG_COLOR;\r\n        this.initCanvas();\r\n    }\r\n\r\n    // Make canvas instance\r\n    initCanvas() {\r\n        this.canvas = document.getElementById('canvas');\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        this.canvas.width = this.width;\r\n        this.canvas.height = this.height;\r\n    }\r\n\r\n    listenKeyDown(callback) {\r\n        document.addEventListener('keydown', (evt) => {\r\n            evt = evt || window.event;\r\n            callback(evt.keyCode);\r\n        }, false);\r\n    }\r\n\r\n    render(snake, food, score) {\r\n        this.ctx.clearRect(0, 0, this.width, this.height);\r\n        this.drawBackground();\r\n        this.drawSnake(snake);\r\n        this.drawFood(food);\r\n    }\r\n\r\n    // Draw canvas background\r\n    drawBackground() {\r\n        if (!this.canvas || !this.ctx) {\r\n            this.initCanvas();\r\n        }\r\n\r\n        // draw background and border\r\n        this.ctx.rect(0, 0, this.width, this.height);\r\n        this.ctx.fillStyle = this.bgColor;\r\n        this.ctx.fill();\r\n\r\n        this.ctx.strokeStyle = this.borderColor;\r\n        this.ctx.lineWidth = 2;\r\n        this.ctx.stroke();\r\n    }\r\n\r\n    // Draw the snake at the given position(x, y)\r\n    drawSnake(snake) {\r\n        for (let i = 0, len = snake.getLength(); i < len; i++) {\r\n            let node = snake.nodeAt(i);\r\n            if (node) {\r\n                this.ctx.fillStyle = node.color;\r\n                this.ctx.fillRect(node.x, node.y, snake.size, snake.size);\r\n            }\r\n        }\r\n    }\r\n\r\n    drawFood(food) {\r\n        //let pos = makeFood(snake, this.width, this.height);\r\n        this.ctx.fillStyle = food.color;\r\n        this.ctx.fillRect(food.x, food.y, food.size, food.size);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/view.js","const DEF_SIZE = 10;\r\nconst BODY_COLOR = '#333';\r\nconst HEAD_COLOR = '#0089A7';\r\n\r\nfunction _makeBodyNode(nodeX, nodeY) {\r\n    return {\r\n        color: BODY_COLOR,\r\n        x: nodeX,\r\n        y: nodeY\r\n    };\r\n}\r\n\r\nexport default class {\r\n    constructor(options) {\r\n        options = options || {};\r\n        this.size = options.size || DEF_SIZE;               // node size\r\n        this.bodyColor = options.bodyColor || BODY_COLOR;   // body color\r\n        this.headColor = options.headColor || HEAD_COLOR;   // head color\r\n    }\r\n\r\n    init(x, y) {\r\n        this.body = [];  // head is the last element\r\n        this.nextStep({\r\n            x: 1,\r\n            y: 0\r\n        });\r\n\r\n        // 3 nodes long initially □□\r\n        let count = 0;\r\n        while (count < 3) {\r\n            let node = _makeBodyNode(x - this.size * count, y);\r\n            this.addNode(node);\r\n            count++;\r\n        }\r\n    }\r\n\r\n    // Snake moves in the given direction\r\n    move() {\r\n        let count = 0;\r\n\r\n        while(count < this.getLength()) {\r\n            let nextNode = this.body[count + 1];\r\n            let currNode = this.body[count];\r\n\r\n            // move current node to the position of the next node,\r\n            if (nextNode) {\r\n                currNode.x = nextNode.x;\r\n                currNode.y = nextNode.y;\r\n            } else {\r\n                // move head one step further in the given direction\r\n                currNode.x = currNode.x + this.snakeX * this.size;\r\n                currNode.y = currNode.y + this.snakeY * this.size;\r\n            }\r\n\r\n            count++;\r\n        }\r\n    }\r\n\r\n    nextStep(dir) {\r\n        this.snakeX = dir.x;\r\n        this.snakeY = dir.y;\r\n    }\r\n\r\n    // Append one node to the body\r\n    addNode(node) {\r\n        if (!node) {\r\n            throw new Error('node is undefined.');\r\n        }\r\n        // if length is 0, then it's the head\r\n        if (this.getLength() === 0) {\r\n            node.color = this.headColor;\r\n        }\r\n        this.body.unshift(node);\r\n        return this;\r\n    }\r\n\r\n    grow() {\r\n        let head = this.getHead();\r\n        let newHead = _makeBodyNode(head.x, head.y);\r\n        head.color = BODY_COLOR;\r\n        newHead.color = HEAD_COLOR;\r\n        this.body.push(newHead);\r\n    }\r\n\r\n    nodeAt(index) {\r\n        return this.body[index];\r\n    }\r\n\r\n    getHead() {\r\n        return this.body[this.body.length - 1];\r\n    }\r\n\r\n    getTail() {\r\n        return this.body[0];\r\n    }\r\n\r\n    getLength() {\r\n        return this.body.length;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/snake.js"],"sourceRoot":""}