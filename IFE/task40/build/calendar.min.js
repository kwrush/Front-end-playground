var Calendar=function(e){"use strict";var t="January, February, March, April, May, June, July, August, September, October, November, December".split(/,\s*/),a="Mon, Tue, Wed, Thu, Fri, Sat, Sun".split(/,\s*/),n='<div class="calendar-header">    <h2 class="calendar-title"></h2>    <span class="calendar-nav-button calendar-nav-prev-button"></span>    <span class="calendar-nav-button calendar-nav-next-button"></span></div><div class="calendar-pane">    <div class="calendar-view calendar-date-view">        <ul class="calendar-weekday-header"></ul>        <div class="calendar-view-wrap">            <div class="calendar-prev-view"></div>            <div class="calendar-curr-view"></div>            <div class="calendar-next-view"></div>        </div>    </div></div>',i={width:330,height:280,callback:{select:function(){}}};e=e||{};for(var r in i)e[r]||(e[r]=i[r]);i.month=t,i.weekday=a,this.options=e,this._defaults=i,this._mainTemplate=n,this.init()};Calendar.prototype={constructor:Calendar,init:function(){this.container=this._initContainer();var e=this.container;e.style.width=this.options.width+"px",e.style.height=this.options.height+"px",e.innerHTML=this._mainTemplate,this.calendarHead=e.querySelector(".calendar-header"),this.calendarPane=e.querySelector(".calendar-pane"),this.calendarPane.style.width="100%",this.calendarPane.style.height=e.clientHeight-this.calendarHead.offsetHeight+"px",this.calendarTitle=e.querySelector(".calendar-title"),this.prevNavButton=e.querySelector(".calendar-nav-prev-button"),this.nextNavButton=e.querySelector(".calendar-nav-next-button"),this.dateView=e.querySelector(".calendar-date-view"),this._initCalendarHeader(),this._initDateView(),this._listen()},render:function(){this.container.innerHTML=this._mainTemplate},getDate:function(){},getDateSelection:function(e){},_initContainer:function(){var e=document.getElementsByClassName("calendar")[0];return e?e:(e=document.createElement("div"),e.className="calendar",document.body.appendChild(e),e)},_initCalendarHeader:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth();this.calendarTitle.setAttribute("data-year",t),this.calendarTitle.setAttribute("data-month",a),this.calendarTitle.innerText=this._getMonthText(a)+" "+t,this.prevNavButton.innerHTML=this._getPrevIcon(),this.nextNavButton.innerHTML=this._getNextIcon()},_initDateView:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth();this.dateWrap=this.dateView.querySelector(".calendar-view-wrap"),this.weekdayHead=this.dateView.querySelector(".calendar-weekday-header"),this.dateWrap.style.width="100%",this.dateWrap.style.height=this.dateView.clientHeight-this.weekdayHead.clientHeight+"px";var n=this.dateWrap.querySelector(".calendar-curr-view"),i=this.dateWrap.querySelector(".calendar-prev-view"),r=this.dateWrap.querySelector(".calendar-next-view");this.weekdayHead.innerHTML=this._getWeekdayHeader(),n.innerHTML=this._getDateViewOfMonth(t,a),i.innerHTML=this._getDateViewOfMonth(t,a-1),r.innerHTML=this._getDateViewOfMonth(t,a+1)},_initMonthView:function(){},_getWeekdayHeader:function(){var e=[],t=100/this._defaults.weekday.length;height=32;for(var a=0,n=this._defaults.weekday.length;a<n;a++){var i=document.createElement("li");i.innerText=this._defaults.weekday[a],i.style.width=t+"%",i.style.height=height+"px",i.style.lineHeight=height+"px",e.push(i.outerHTML)}return e.join("")},_getDateViewOfMonth:function(e,t){for(var a=(new Date(e,t),6),n=this._defaults.weekday.length,i=0,r=[],s=(new Date).setHours(0,0,0,0),l=this._firstDayOfMonth(e,t),d=this._daysInCurrMonth(e,t),h=this._daysInPrevMonth(e,t),c=(this._daysInNextMonth(e,t),this.dateWrap.clientWidth/n),o=this.dateWrap.clientHeight/a,u=0;u<a;u++)for(var v=0;v<n;v++){var w=++i-l,y=["calendar-day"];w<0?(w=h+w+1,dayTime=new Date(e,t-1,w).getTime(),y.push("calendar-prev-month-day")):(w++,w>d?(w-=d,dayTime=new Date(e,t+1,w).getTime(),y.push("calendar-next-month-day")):dayTime=new Date(e,t,w).getTime()),dayTime===s&&y.push("calendar-today selected");var g=new Date(dayTime),p=this._getDateView(g,y,c,o);r.push(p)}return r.join("")},_monthView:function(e){new Date},_getDateView:function(e,t,a,n){var i=document.createElement("div"),r=document.createElement("span");i.appendChild(r),i.className=t.join(" "),i.style.width=a+"px",i.style.height=n+"px",i.style.lineHeight=n+"px",i.setAttribute("data-year",e.getFullYear()),i.setAttribute("data-month",e.getMonth()),i.setAttribute("data-date",e.getDate());var s;return s=a>n?(n>34?34:n)+"px":(a>34?34:a)+"px",r.style.display="block",r.style.width=s,r.style.height=s,r.style.lineHeight=s,r.innerText=e.getDate(),i.outerHTML},_getMonthText:function(e){var t;return t=this._isa(e,"Number")?e:this._isDate(e)?e.getMonth():(new Date).getMonth(),this._defaults.month[t]},_firstDayOfMonth:function(e,t){return new Date(e,t).getDay()||7},_getPrevIcon:function(){return'<svg class="calendar-nav-icon" viewBox="0 0 24 24">    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>'},_getNextIcon:function(){return'<svg class="calendar-nav-icon" viewBox="0 0 24 24">    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg>'},_daysInCurrMonth:function(e,t){return this._totalDaysInMonth(e,t+1)},_daysInNextMonth:function(e,t){return this._totalDaysInMonth(e,t+2)},_daysInPrevMonth:function(e,t){return this._totalDaysInMonth(e,t)},_totalDaysInMonth:function(e,t){var a=e||(new Date).getFullYear(),n=t||(new Date).getMonth()+1;return new Date(a,n,0).getDate()},_listen:function(){this.calendarHead.addEventListener("click",this._handleNavigation.bind(this)),this.dateView.addEventListener("click",this._handleSelectDate.bind(this))},_handleNavigation:function(e){e=e||window.event,e.preventDefault();for(var t=e.target||e.srcElement;"SPAN"!==t.tagName;)t=t.parentElement;var a,n,i,r=this.dateWrap.querySelector(".calendar-curr-view"),s=this.dateWrap.querySelector(".calendar-prev-view"),l=this.dateWrap.querySelector(".calendar-next-view"),d=parseInt(this.calendarTitle.getAttribute("data-year"),10),h=parseInt(this.calendarTitle.getAttribute("data-month"),10);t===this.nextNavButton?(r.className="calendar-prev-view",l.className="calendar-curr-view",s.className="calendar-next-view",a=new Date(d,h+1),n=a.getFullYear(),i=a.getMonth(),s.innerHTML=this._getDateViewOfMonth(n,i+1)):t===this.prevNavButton&&(r.className="calendar-next-view",s.className="calendar-curr-view",l.className="calendar-prev-view",a=new Date(d,h-1),n=a.getFullYear(),i=a.getMonth(),l.innerHTML=this._getDateViewOfMonth(n,i-1)),this.calendarTitle.innerText=this._getMonthText(i)+" "+n,this.calendarTitle.setAttribute("data-year",n),this.calendarTitle.setAttribute("data-month",i)},_handleSelectDate:function(e){},_isDate:function(e){return this._isa(e,"Date")},_isa:function(e,t){var a=Object.prototype.toString.call(e);return a==="[object "+t.trim()+"]"}};